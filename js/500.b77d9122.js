"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[500],{4500:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var s=a(6252),l=a(3577),i=a(9963);const o={class:"about"},d=(0,s._)("h1",null,"This is 購物車頁面",-1),r={class:"container"},n={class:"row justify-content-center"},c={class:"col-md-6"},u={class:"table align-middle"},m=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th"),(0,s._)("th",null,"品名"),(0,s._)("th",{style:{width:"110px"}},"數量"),(0,s._)("th",null,"單價")])],-1),p=["onClick","disabled"],_={key:0,class:"fas fa-spinner fa-pulse"},h=(0,s.Uk)(" 移除購物車 "),f={key:0,class:"text-success"},g={class:"input-group input-group-sm"},v={class:"text-end"},b={key:0,class:"text-success"},k=(0,s._)("td",{colspan:"3",class:"text-end"},"總計",-1),w={class:"text-end"},y={key:0},x=(0,s._)("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),C={class:"text-end text-success"},V={class:"my-5 row justify-content-center"},U={class:"mb-3"},q=(0,s._)("label",{for:"email",class:"form-label"},[(0,s.Uk)("Email "),(0,s._)("input",{type:"hidden"})],-1),W={class:"mb-3"},L=(0,s._)("label",{for:"name",class:"form-label"},[(0,s.Uk)("收件人姓名 "),(0,s._)("input",{type:"hidden"})],-1),D={class:"mb-3"},I=(0,s._)("label",{for:"tel",class:"form-label"},[(0,s.Uk)("收件人電話 "),(0,s._)("input",{type:"hidden"})],-1),S={class:"mb-3"},z=(0,s._)("label",{for:"address",class:"form-label"},[(0,s.Uk)("收件人地址 "),(0,s._)("input",{type:"hidden"})],-1),$={class:"mb-3"},E=(0,s._)("label",{for:"message",class:"form-label"},[(0,s.Uk)("留言 "),(0,s._)("input",{type:"hidden"})],-1),F=(0,s._)("div",{class:"text-end"},[(0,s._)("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function j(e,t,a,j,O,H){const K=(0,s.up)("Loading"),M=(0,s.up)("Field"),T=(0,s.up)("ErrorMessage"),Y=(0,s.up)("Form");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(K,{active:O.isLoading},null,8,["active"]),d,(0,s._)("div",r,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("table",u,[m,(0,s._)("tbody",null,[O.cart.carts?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(O.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>H.removeCartItem(e.id),disabled:O.loadingStatus.loadingItem===e.id},[O.loadingStatus.loadingItem===e.id?((0,s.wg)(),(0,s.iD)("i",_)):(0,s.kq)("",!0),h],8,p)]),(0,s._)("td",null,[(0,s.Uk)((0,l.zw)(e.product.title)+" ",1),e.coupon?((0,s.wg)(),(0,s.iD)("div",f,"已套用優惠券")):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("div",g,(0,l.zw)(e.qty)+" / "+(0,l.zw)(e.product.unit),1)]),(0,s._)("td",v,[O.cart.final_total!==O.cart.total?((0,s.wg)(),(0,s.iD)("small",b,"折扣價：")):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,l.zw)(e.final_total),1)])])))),128)):(0,s.kq)("",!0)]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[k,(0,s._)("td",w,(0,l.zw)(O.cart.total),1)]),O.cart.final_total!==O.cart.total?((0,s.wg)(),(0,s.iD)("tr",y,[x,(0,s._)("td",C,(0,l.zw)(O.cart.final_total),1)])):(0,s.kq)("",!0)])])])]),(0,s._)("div",V,[(0,s.Wm)(Y,{ref:"form",class:"col-md-6",onSubmit:H.createOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",U,[q,(0,s.Wm)(M,{id:"email",name:"email",type:"email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:O.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>O.form.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(T,{name:"email",class:"invalid-feedback"})]),(0,s._)("div",W,[L,(0,s.Wm)(M,{id:"name",name:"姓名",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:O.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>O.form.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(T,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",D,[I,(0,s.Wm)(M,{id:"tel",name:"電話",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required|regex:^09[0-9]{8}$",modelValue:O.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>O.form.user.tel=e)},null,8,["class","modelValue"]),(0,s.Wm)(T,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",S,[z,(0,s.Wm)(M,{id:"address",name:"地址",type:"text",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:O.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>O.form.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(T,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",$,[E,(0,s.wy)((0,s._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=e=>O.form.message=e)},null,512),[[i.nr,O.form.message]])]),F])),_:1},8,["onSubmit"])])])])}var O={name:"CartView",data(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},mounted(){this.getCart()},methods:{getCart(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/cart";this.$http.get(e).then((e=>{e.data.success?(this.cart=e.data.data,this.isLoading=!1):alert(e.data.message)}))},removeCartItem(e){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/cart/${e}`;this.loadingStatus.loadingItem=e,this.$http.delete(t).then((e=>{alert(e.data.message),this.getCart()})).catch((e=>{alert(e.data.message)})),this.loadingStatus.loadingItem="",this.isLoading=!1},createOrder(){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/v2/api/vuetestproducts/order",t=this.form;this.$http.post(e,{data:t}).then((e=>{alert(e.data.message),this.$refs.form.resetForm(),this.isLoading=!1})).catch((e=>{alert(e.data.message)}))}}},H=a(3744);const K=(0,H.Z)(O,[["render",j]]);var M=K}}]);
//# sourceMappingURL=500.b77d9122.js.map