{"version":3,"file":"js/500.b77d9122.js","mappings":"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","sources":["webpack://vue-week6/./src/views/CartView.vue","webpack://vue-week6/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <div class=\"about\">\n    <Loading :active=\"isLoading\"></Loading>\n    <h1>This is 購物車頁面</h1>\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-6\">\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template v-if=\"cart.carts\">\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"removeCartItem(item.id)\"\n                      :disabled=\"loadingStatus.loadingItem === item.id\"\n                    >\n                      <i\n                        class=\"fas fa-spinner fa-pulse\"\n                        v-if=\"loadingStatus.loadingItem === item.id\"\n                      ></i>\n                      移除購物車\n                    </button>\n                  </td>\n                  <td>\n                    {{ item.product.title }}\n                    <div class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</div>\n                  </td>\n                  <td>\n                    <div class=\"input-group input-group-sm\">\n                      {{ item.qty }} / {{ item.product.unit }}\n                    </div>\n                  </td>\n                  <td class=\"text-end\">\n                    <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\"\n                      >折扣價：</small\n                    >\n                    {{ item.final_total }}\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td colspan=\"3\" class=\"text-end\">總計</td>\n                <td class=\"text-end\">{{ cart.total }}</td>\n              </tr>\n              <tr v-if=\"cart.final_total !== cart.total\">\n                <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n                <td class=\"text-end text-success\">{{ cart.final_total }}</td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n      <div class=\"my-5 row justify-content-center\">\n        <Form ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email <input type=\"hidden\" /></label>\n            <Field\n              id=\"email\"\n              name=\"email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['email'] }\"\n              placeholder=\"請輸入 Email\"\n              rules=\"email|required\"\n              v-model=\"form.user.email\"\n            ></Field>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名 <input type=\"hidden\" /></label>\n            <Field\n              id=\"name\"\n              name=\"姓名\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['姓名'] }\"\n              placeholder=\"請輸入姓名\"\n              rules=\"required\"\n              v-model=\"form.user.name\"\n            ></Field>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話 <input type=\"hidden\" /></label>\n            <Field\n              id=\"tel\"\n              name=\"電話\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['電話'] }\"\n              placeholder=\"請輸入電話\"\n              rules=\"required|regex:^09[0-9]{8}$\"\n              v-model=\"form.user.tel\"\n            ></Field>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址 <input type=\"hidden\" /></label>\n            <Field\n              id=\"address\"\n              name=\"地址\"\n              type=\"text\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors['地址'] }\"\n              placeholder=\"請輸入地址\"\n              rules=\"required\"\n              v-model=\"form.user.address\"\n            ></Field>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言 <input type=\"hidden\" /></label>\n            <textarea\n              name=\"\"\n              id=\"message\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-end\">\n            <button type=\"submit\" class=\"btn btn-danger\">送出訂單</button>\n          </div>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CartView',\n  data() {\n    return {\n      loadingStatus: {\n        loadingItem: '',\n      },\n      isLoading: false,\n      cart: {},\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      coupon_code: '',\n    };\n  },\n  mounted() {\n    this.getCart();\n  },\n  methods: {\n    getCart() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((response) => {\n        if (response.data.success) {\n          this.cart = response.data.data;\n          this.isLoading = false;\n        } else {\n          alert(response.data.message);\n        }\n      });\n    },\n    removeCartItem(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.loadingStatus.loadingItem = id;\n      this.$http\n        .delete(url)\n        .then((response) => {\n          alert(response.data.message);\n          this.getCart();\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n      this.loadingStatus.loadingItem = '';\n      this.isLoading = false;\n    },\n    createOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http\n        .post(url, { data: order })\n        .then((response) => {\n          alert(response.data.message);\n          this.$refs.form.resetForm();\n\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          alert(err.data.message);\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=691ec0b4\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Project\\\\hexSchool\\\\vue_week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","colspan","for","type","_createElementBlock","_createVNode","_component_Loading","active","$data","_hoisted_2","_hoisted_7","carts","_Fragment","key","_renderList","item","id","onClick","$options","disabled","loadingItem","product","title","coupon","_toDisplayString","qty","unit","final_total","total","_hoisted_15","_hoisted_17","_hoisted_18","_component_Form","ref","onSubmit","errors","_hoisted_22","_component_Field","name","placeholder","rules","user","email","$event","_component_ErrorMessage","_hoisted_24","_hoisted_26","tel","_hoisted_28","address","_hoisted_30","cols","rows","message","_hoisted_31","data","loadingStatus","isLoading","cart","form","coupon_code","mounted","this","getCart","methods","url","$http","get","then","response","success","alert","removeCartItem","delete","catch","err","createOrder","order","post","$refs","resetForm","__exports__","render"],"sourceRoot":""}